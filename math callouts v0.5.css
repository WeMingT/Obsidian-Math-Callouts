/* ================================ */
/* å­¦æœ¯Calloutç³»ç»Ÿ v5.0 - ç»ˆæç‰ˆ */
/* ================================ */

/*** æ ¸å¿ƒæ¶æ„ ***/
.callout {
    --callout-color: 100, 100, 100; /* é»˜è®¤é¢œè‰² */
    --callout-prefix: "ğŸ“Œ Note";
    
    border-radius: 3px;
    margin: 1.5rem 0;
    border: 1px solid rgba(var(--callout-color), 0.15);
    border-left-width: 4px;
    background: rgba(var(--callout-color), 0.06);
    overflow: hidden;
    transition: all 0.2s ease;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.callout:hover {
    transform: translateX(2px);
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}

.callout-title {
    padding: 10px 15px;
    font-family: "Latin Modern Roman", Georgia, serif;
    font-weight: 600;
    letter-spacing: 0.05em;
    border-bottom: 1px solid rgba(var(--callout-color), 0.1);
    background: rgba(var(--callout-color), 0.04);
    color: rgb(var(--callout-color));
}

.callout-content {
    padding: 15px;
    line-height: 1.7;
    color: var(--text-normal);
}

/*** å›¾æ ‡ç³»ç»Ÿ ***/
.callout-icon { display: none !important; } /* ç¦ç”¨é»˜è®¤å›¾æ ‡ */

.callout-title-inner::before {
    content: var(--callout-prefix);
    font-family: "Apple Symbols", "Segoe UI Emoji";
    margin-right: 10px;
    font-weight: 500;
    filter: saturate(1.2);
}

/*** ç¯å¢ƒç±»å‹å®šä¹‰ ***/
/* æ•°å­¦åŸºç¡€ */
.callout[data-callout="theorem"] {
    --callout-color: 2, 117, 216; /* ç‰›æ´¥è“ */
    --callout-prefix: "ğŸ“œ Theorem";
}

.callout[data-callout="lemma"] {
    --callout-color: 40, 167, 69; /* æ£®æ—ç»¿ */
    --callout-prefix: "ğŸŒ¿ Lemma";
}

.callout[data-callout="proposition"] {
    --callout-color: 111, 66, 193; /* çš‡å®¶ç´« */
    --callout-prefix: "ğŸ“‘ Proposition";
}

/* å…¬ç†ä½“ç³» */
.callout[data-callout="axiom"] {
    --callout-color: 200, 80, 0; /* èµ¤é™¶è‰² */
    --callout-prefix: "â­ Axiom";
}

.callout[data-callout="postulate"] {
    --callout-color: 180, 40, 40; /* æ·±çº¢è‰² */
    --callout-prefix: "ğŸŒ Postulate";
}

/* é—®é¢˜è§£å†³ */
.callout[data-callout="problem"] {
    --callout-color: 220, 53, 69; /* è­¦ç¤ºçº¢ */
    --callout-prefix: "â“ Problem";
}

.callout[data-callout="exercise"] {
    --callout-color: 255, 132, 0; /* ç¥ç€æ©™ */
    --callout-prefix: "âœï¸ Exercise";
}

.callout[data-callout="solution"] {
    --callout-color: 0, 150, 100; /* ç¿¡ç¿ ç»¿ */
    --callout-prefix: "âœ… Solution";
}

.callout[data-callout="hint"] {
    --callout-color: 255, 193, 7; /* é»„é‡‘è‰² */
    --callout-prefix: "ğŸ’¡ Hint";
}

/* é€»è¾‘ç»“æ„ */
.callout[data-callout="proof"] {
    --callout-color: 50, 50, 50; /* çŸ³å¢¨ç° */
    --callout-prefix: "ğŸ” Proof";
}

.callout[data-callout="corollary"] {
    --callout-color: 150, 80, 180; /* ç´«æ°´æ™¶ */
    --callout-prefix: "â‡’ Corollary";
}

.callout[data-callout="conclusion"] {
    --callout-color: 40, 100, 120; /* æ·±æµ·è“ */
    --callout-prefix: "ğŸ¯ Conclusion";
}

/* å®šä¹‰æè¿° */
.callout[data-callout="definition"] {
    --callout-color: 100, 100, 100; /* ä¸­ç°è‰² */
    --callout-prefix: "ğŸ“– Definition";
}

.callout[data-callout="technique"] {
    --callout-color: 0, 120, 140; /* å­”é›€è“ */
    --callout-prefix: "âš™ï¸ Technique";
}

/* ç®—æ³•ä¸è¾¨æ */
.callout[data-callout="algorithm"] {
    --callout-color: 0, 160, 160; /* è“ç»¿è‰² */
    --callout-prefix: "â‡„ Algorithm";
}

.callout[data-callout="discrimination"] {
    --callout-color: 180, 100, 0; /* èµ­è‰² */
    --callout-prefix: "âš–ï¸ Discrimination";
}

.callout[data-callout="example"] {
    --callout-color: 150, 0, 150; /* å“çº¢è‰² */
    --callout-prefix: "ğŸ“‹ Example";
}

/* æ–°å¢ç¯å¢ƒç±»å‹ */
.callout[data-callout="remark"] {
    --callout-color: 180, 100, 180; /* æ·¡ç´«è‰² */
    --callout-prefix: "ğŸ“Œ Remark";
}

.callout[data-callout="conjecture"] {
    --callout-color: 30, 100, 180; /* æ˜Ÿç©ºè“ */
    --callout-prefix: "ğŸŒŒ Conjecture";
}

.callout[data-callout="note"] {
    --callout-color: 100, 100, 150; /* çŸ³æ¿ç° */
    --callout-prefix: "ğŸ“” Note";
}

.callout[data-callout="property"] {
    --callout-color: 0, 128, 128; /* æ·±é’è‰² */
    --callout-prefix: "ğŸ·ï¸ Property";
}

.callout[data-callout="assumption"] {
    --callout-color: 200, 150, 0; /* é»„è¤è‰² */
    --callout-prefix: "ğŸ›ï¸ Assumption";
}

.callout[data-callout="observation"] {
    --callout-color: 60, 140, 60; /* æ©„æ¦„ç»¿ */
    --callout-prefix: "ğŸ”¬ Observation";
}

.callout[data-callout="paradox"] {
    --callout-color: 200, 50, 50; /* çŒ©çº¢è‰² */
    --callout-prefix: "ğŸŒ€ Paradox";
}

.callout[data-callout="methodology"] {
    --callout-color: 80, 80, 160; /* é›è“è‰² */
    --callout-prefix: "ğŸ§® Methodology";
}

/*** æ·±è‰²æ¨¡å¼ä¼˜åŒ– ***/
.theme-dark .callout {
    background: rgba(var(--callout-color), 0.12);
    border-color: rgba(var(--callout-color), 0.25);
}

.theme-dark .callout-title {
    border-bottom-color: rgba(var(--callout-color), 0.15);
}

/*** æ™ºèƒ½æ ‡é¢˜ç³»ç»Ÿ ***/
.callout-title-inner:empty::after {
    content: attr(data-callout);
    text-transform: capitalize;
    font-weight: 600;
    color: rgba(var(--callout-color), 0.9);
}

/*** å“åº”å¼å¸ƒå±€ ***/
@media (max-width: 768px) {
    .callout {
        margin: 1.2rem 0;
        border-left-width: 3px;
    }
    .callout-title {
        padding: 8px 12px;
        font-size: 0.95em;
    }
    .callout-title-inner::before {
        margin-right: 8px;
    }
}

/****** éšè—IDç³»ç»Ÿ ******/
.hidden-id {
    font-size: 0 !important;
    opacity: 0;
    position: absolute;
    pointer-events: none;
}

/* å—å¼•ç”¨æ‚¬æµ®æç¤º */
.internal-link[href*="#^"]::after {
    content: " â†’ " attr(href);
    font-family: "Fira Code", monospace;
    font-size: 0.9em;
    color: rgba(var(--callout-color), 0.7);
    margin-left: 0.5em;
    vertical-align: baseline;
}

/* ä¿æŒCalloutæ ‡é¢˜å¯¹é½ */
.callout-title .hidden-id {
    display: inline-block;
    width: 0;
    overflow: visible;
}

/* å¯¼å‡ºå…¼å®¹æ€§å¢å¼º */
@media print {
    .hidden-id {
        font-size: 1pt !important;
        color: #0000 !important;
    }
    
    .callout {
        break-inside: avoid-page;
        box-shadow: none !important;
    }
}

/****** å…¬å¼ç¼–å·ç³»ç»Ÿ ******/
.equation-id {
    font-size: 0;
    opacity: 0.01;
    line-height: 0;
    user-select: none;
}

/* å…¬å¼å—èšç„¦æ•ˆæœ */
.markdown-rendered .math:has(.equation-id) {
    position: relative;
    padding-right: 20px;
}

.markdown-rendered .math:has(.equation-id):hover::after {
    content: attr(data-id);
    position: absolute;
    right: -30px;
    top: 50%;
    transform: translateY(-50%);
    font-family: "Fira Code", monospace;
    font-size: 0.8em;
    color: rgba(2, 117, 216, 0.7);
    background: rgba(255,255,255,0.9);
    padding: 2px 5px;
    border-radius: 3px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

